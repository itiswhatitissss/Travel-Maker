<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>TravelMaker</title>
    <link rel="stylesheet" th:href="@{/css/header.css}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<header class="header">
    <nav class="navbar">
        <a href="#" data-bs-toggle="modal" data-bs-target="#friendModal">친구목록</a>
        <a href="#">Home</a>
        <a href="#">Home</a>
        <a href="#">Home</a>
        <a href="#">Home</a>
    </nav>

    <nav class="navbar" style="display: flex; justify-content: space-between;">
        <a>
            <span th:text="${username}" style="margin-left: auto;"></span> 님 안녕하세요!
            &nbsp;&nbsp;&nbsp;&nbsp;
        </a>
        <a href="/travelmaker/user/logout">로그아웃</a>
    </nav>
    <!-- 친구목록 모달 -->
    <div class="modal fade" id="friendModal" tabindex="-1" aria-labelledby="friendModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="friendModalLabel">친구목록</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-----검색기능------>
                    <form th:action="@{/travelmaker/main/friendSearch}" method="post" class="d-flex">
                        <input type="search" class="form-control" name="searchText" id="friendSearchInput" placeholder="친구 검색..." aria-label="친구 검색">
                        <button type="submit" class="btn btn-primary">검색</button>
                    </form>
                    <!--                        <div th:if="${list == 0}">-->
                    <!-- 리스트 크기가 0일 때 처리할 내용 -->
                    <form th:action="@{/travelmaker/main/friendDelete}" method="post" class="d-flex">
                        <div class="form-check">
                            <div th:each="friend: ${friendDTO}">
                                <h7 th:text="${friend.name}"></h7>
                                <input class="form-check-input" type="checkbox" th:value="${friend.fno}" name="selectedFriends" id="friendCheckbox">
                            </div>
                        </div>
                        <br>
                        <br>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-secondary" data-bs-dismiss="modal">친구삭제</button>
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                        </div>
                    </form>

                    <!-- 리스트가 1일 때 처리할 내용 -->
                    <form th:action="@{/travelmaker/main/friendInsert}" method="post" class="d-flex">
                        <div th:if="${friendSearchResult != null}">
                            <div th:each="friends: ${friendSearchResult}">
                                <input class="form-check-input" type="checkbox" th:value="${friends.uno}" name="selectedFriends" id="friendCheckbox">
                                <h7 th:text="${friends.name}"></h7>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-secondary" data-bs-dismiss="modal">친구추가</button>
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                            </div>
                        </div>
                        <div th:if="${#lists.isEmpty(friendSearchResult)}">
                            <p>검색 결과가 없습니다.</p>
                        </div>
                    </form>
                    <!-- 친구 목록 출력 부분 -->
                </div>
            </div>
        </div>
    </div>
    <!---------친구끝---------->
</header>
<!--header-->
<script src="/js/login2.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>